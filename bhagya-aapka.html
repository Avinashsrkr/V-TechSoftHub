<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bhagya Aapka | Authentic Vedic Astrology</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Yatra+One&family=Gotu&family=Cinzel:wght@400;700&family=Rajdhani:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        /* --- DYNAMIC THEME --- */
        :root {
            --bg-dark: #050200;
            --primary: #FF9933; 
            --secondary: #FFD700;    
            --text-light: #fff5e6;
            --card-bg: rgba(20, 10, 5, 0.95);
            --font-main: 'Yatra One', cursive; 
            --font-body: 'Gotu', sans-serif;   
        }

        * { margin: 0; padding: 0; box-sizing: border-box; scroll-behavior: smooth; }
        
        body { 
            background-color: var(--bg-dark); 
            color: var(--text-light); 
            font-family: var(--font-body);
            overflow-x: hidden;
            transition: background 1.5s ease;
        }

        /* --- BACKGROUND ANIMATION --- */
        .wave-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
            pointer-events: none; opacity: 0.2;
        }
        .float-symbol {
            position: absolute; color: var(--secondary); font-size: 2rem;
            animation: float 15s infinite linear;
        }
        @keyframes float { 0% { transform: translateY(100vh) rotate(0deg); } 100% { transform: translateY(-10vh) rotate(360deg); } }

        /* --- NAV & MARQUEE --- */
        nav {
            padding: 10px 5%; display: flex; justify-content: space-between; align-items: center;
            background: #000; position: fixed; width: 100%; top: 0; z-index: 1000;
            border-bottom: 2px solid var(--primary);
        }
        .logo-group { display: flex; align-items: center; gap: 10px; }
        .logo-img { width: 45px; height: 45px; border-radius: 50%; border: 2px dashed var(--primary); animation: spin 10s linear infinite; }
        .logo-text { font-family: var(--font-main); font-size: 1.5rem; color: var(--secondary); }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        .marquee-container {
            position: fixed; top: 70px; width: 100%; background: #220a00;
            border-bottom: 1px solid var(--secondary); z-index: 900;
            padding: 8px 0; color: var(--secondary); font-family: var(--font-main);
            overflow: hidden; white-space: nowrap;
        }
        .marquee-text { display: inline-block; padding-left: 100%; animation: scroll 40s linear infinite; }
        @keyframes scroll { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }

        /* --- HERO FORM --- */
        .hero-section { margin-top: 160px; padding: 20px; text-align: center; min-height: 85vh; }
        
        .form-box {
            background: rgba(0,0,0,0.85); border: 2px solid var(--secondary);
            padding: 30px; border-radius: 15px; max-width: 650px; margin: 0 auto;
            box-shadow: 0 0 30px rgba(255, 153, 51, 0.2); position: relative;
        }
        .input-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .input-field {
            width: 100%; padding: 12px; background: #1a0500; border: 1px solid #555;
            color: var(--secondary); font-family: var(--font-body); outline: none;
        }
        
        .city-results {
            position: absolute; background: #111; width: 100%; max-height: 200px;
            overflow-y: auto; z-index: 10; border: 1px solid var(--primary); display: none; text-align: left;
        }
        .city-item { padding: 10px; cursor: pointer; border-bottom: 1px solid #333; color: #ccc; }
        .city-item:hover { background: var(--primary); color: #000; }

        .btn-generate {
            width: 100%; padding: 15px; background: linear-gradient(45deg, var(--primary), var(--secondary));
            border: none; font-family: var(--font-main); font-size: 1.3rem; cursor: pointer; margin-top: 20px;
            color: #000; font-weight: bold; clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);
        }
        .btn-generate:hover { transform: scale(1.02); box-shadow: 0 0 20px var(--primary); }

        /* --- DASHBOARD --- */
        .dashboard { display: none; animation: fadeIn 1s; padding-bottom: 50px; }
        @keyframes fadeIn { from { opacity:0; transform:translateY(20px); } to { opacity:1; transform:translateY(0); } }

        .user-header {
            text-align: center; padding: 30px; background: rgba(255,255,255,0.05);
            border-bottom: 2px solid var(--primary); margin-bottom: 30px;
        }

        .panchang-horoscope-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;
            padding: 0 5%; margin-bottom: 40px;
        }
        .info-card {
            background: var(--card-bg); border: 1px solid var(--primary); padding: 20px;
            border-radius: 10px; text-align: left; position: relative;
        }
        .chart-svg { width: 100%; height: 100%; stroke: var(--primary); stroke-width: 1.2; }
        
        /* --- GEMSTONE SECTION (NEW) --- */
        .gemstone-box {
            background: linear-gradient(to right, #200500, #000); border: 1px solid var(--secondary);
            margin: 20px 5%; padding: 20px; border-radius: 10px; display: flex; align-items: center; justify-content: space-around;
            flex-wrap: wrap;
        }
        .gem-item { text-align: center; margin: 10px; }
        .gem-icon { font-size: 2.5rem; margin-bottom: 5px; animation: glow 2s infinite alternate; }
        @keyframes glow { from { text-shadow: 0 0 5px white; } to { text-shadow: 0 0 20px var(--primary); } }

        /* --- FREE PDF DOWNLOAD BTN --- */
        .pdf-btn {
            background: #222; border: 1px solid #0f0; color: #0f0; padding: 10px 20px;
            cursor: pointer; font-family: var(--font-body); margin-top: 15px; width: 100%;
            transition: 0.3s;
        }
        .pdf-btn:hover { background: #0f0; color: #000; }

        /* --- LOADING OVERLAY (For PDF) --- */
        .loading-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95);
            z-index: 5000; display: none; flex-direction: column; justify-content: center; align-items: center;
        }
        .progress-bar { width: 300px; height: 5px; background: #333; margin-top: 20px; border-radius: 5px; overflow: hidden; }
        .progress-fill { height: 100%; width: 0%; background: var(--primary); transition: width 0.1s; }

        /* --- MODULES GRID --- */
        .modules-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px;
            padding: 0 5%; opacity: 0.4; pointer-events: none; transition: 0.5s;
        }
        .module-card {
            background: rgba(20, 10, 0, 0.8); border: 1px solid #444; padding: 25px;
            text-align: center; border-radius: 12px; cursor: pointer; transition: 0.3s; position: relative;
        }
        .module-card::after { content: 'üîí Premium'; position: absolute; top: 5px; right: 5px; font-size: 0.7rem; color: #aaa; }
        .module-card:hover { border-color: var(--secondary); transform: translateY(-5px); box-shadow: 0 0 15px var(--primary); }

        /* --- PAYMENT MODAL --- */
        .payment-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95);
            z-index: 4000; display: none; justify-content: center; align-items: center;
        }
        .payment-box {
            background: #111; border: 2px solid var(--secondary); padding: 30px;
            text-align: center; max-width: 400px; border-radius: 15px; position: relative;
        }
        .qr-placeholder { width: 200px; height: 200px; background: white; margin: 20px auto; display: flex; justify-content: center; align-items: center; color: black; font-weight: bold; }

        /* --- FLOATING BUTTONS --- */
        .float-container { position: fixed; bottom: 30px; right: 30px; display: flex; flex-direction: column; gap: 15px; z-index: 2000; }
        .float-btn {
            width: 60px; height: 60px; border-radius: 50%; display: flex;
            justify-content: center; align-items: center; font-size: 30px;
            cursor: pointer; box-shadow: 0 0 20px rgba(0,0,0,0.8); transition: 0.3s; color: white;
        }
        .ai-btn { background: var(--secondary); color: black; animation: bounce 2s infinite; }
        .wa-btn { background: #25D366; }
        .wa-btn:hover { transform: scale(1.1); }

        /* AI CHAT WINDOW (Same as before) */
        .chat-window {
            position: fixed; bottom: 100px; right: 30px; width: 350px; height: 500px;
            background: #0f0500; border: 2px solid var(--secondary); border-radius: 15px;
            z-index: 2000; display: none; flex-direction: column; overflow: hidden;
        }
        .chat-header { background: linear-gradient(45deg, var(--primary), #000); padding: 15px; display: flex; justify-content: space-between; }
        .chat-body { flex: 1; padding: 15px; overflow-y: auto; }
        .chat-footer { padding: 10px; background: #111; display: flex; gap: 5px; }
        .chat-input { flex: 1; padding: 10px; background: #222; border: 1px solid #444; color: white; }

        /* --- FOOTER --- */
        footer { background: #000; padding: 30px; text-align: center; border-top: 1px solid #333; color: #666; }

        @media(max-width: 768px) { .input-grid { grid-template-columns: 1fr; } .chat-window { width: 90%; right: 5%; bottom: 90px; } }
    </style>
</head>
<body onload="updatePanchang()">

    <div class="wave-bg" id="waveContainer"></div>
    
    <div class="float-container">
        <a href="https://wa.me/918602513483" target="_blank" class="float-btn wa-btn"><i class="fab fa-whatsapp"></i></a>
        <div class="float-btn ai-btn" onclick="toggleChat()">ü§ñ</div>
    </div>

    <div class="chat-window" id="aiChatBox">
        <div class="chat-header">
            <span style="color:var(--secondary); font-family:var(--font-main);">AI ‡§µ‡•á‡§¶ (Veda)</span>
            <span id="chatTimer" style="background:red; padding:2px 8px; border-radius:4px; font-size:0.8rem;">50s</span>
            <span onclick="toggleChat()" style="cursor:pointer; color:#fff;">√ó</span>
        </div>
        <div class="chat-body" id="chatBody">
            <div style="background:rgba(255,153,51,0.2); padding:10px; border-radius:5px; border:1px solid var(--primary); color:var(--secondary);">
                ‡§π‡§∞‡§ø ‡•ê! ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡§æ AI ‡§ú‡•ç‡§Ø‡•ã‡§§‡§ø‡§∑ ‡§Æ‡§ø‡§§‡•ç‡§∞ ‡§π‡•Ç‡§Å‡•§ 50 ‡§∏‡•á‡§ï‡§Ç‡§° ‡§Æ‡•á‡§Ç ‡§Ö‡§™‡§®‡§æ ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§™‡•Ç‡§õ‡•á‡§Ç‡•§
            </div>
        </div>
        <div class="chat-footer" id="chatInputArea">
            <input type="text" id="userMsg" class="chat-input" placeholder="Ask here...">
            <button onclick="sendMessage()" style="background:var(--secondary); border:none; padding:0 15px;">‚û§</button>
        </div>
    </div>

    <div class="loading-overlay" id="pdfLoader">
        <div style="font-size:3rem; color:var(--secondary); margin-bottom:20px;">üìú</div>
        <h2 style="color:var(--primary); font-family:var(--font-main);">Generating KP Kundli...</h2>
        <p id="loadingText" style="color:#ccc;">Calculating Planetary Degrees...</p>
        <div class="progress-bar"><div class="progress-fill" id="progFill"></div></div>
    </div>

    <div class="payment-modal" id="paymentModal">
        <div class="payment-box">
            <span onclick="document.getElementById('paymentModal').style.display='none'" style="position:absolute; top:10px; right:15px; cursor:pointer; font-size:1.5rem; color:red;">√ó</span>
            <h3 style="color:var(--gold);">PREMIUM REPORT DAKSHINA</h3>
            <p style="color:#ccc;">Unlock detailed analysis for <span id="payServiceName" style="color:var(--primary);">Service</span></p>
            
            <div class="qr-placeholder">
                <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=upi://pay?pa=8602513483@upi&pn=VTechSoft" alt="UPI QR">
            </div>
            <p style="color:var(--secondary);">Amount: ‚Çπ 501/-</p>
            
            <input type="text" class="input-field" placeholder="Enter Transaction ID" style="margin-top:15px;">
            <button class="btn-generate" onclick="alert('Payment Verified! Report sent to Email.')" style="margin-top:10px; width:100%;">VERIFY & DOWNLOAD</button>
        </div>
    </div>

    <nav>
        <div class="logo-group">
            <img src="logo.png" class="logo-img">
            <span class="logo-text">‡§≠‡§æ‡§ó‡•ç‡§Ø ‡§Ü‡§™‡§ï‡§æ</span>
        </div>
        <div id="google_translate_element"></div>
    </nav>

    <div class="marquee-container">
        <div class="marquee-text" id="liveMarquee">Loading...</div>
    </div>

    <section class="hero-section">
        <div class="accuracy-badge">‚òÖ ‡§¨‡•É‡§π‡§§‡•ç‡§∏‡§Ç‡§π‡§ø‡§§‡§æ ‡§î‡§∞ ‡§π‡•ã‡§∞‡§æ ‡§∂‡§§‡§ï ‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ (99.99% Accuracy) ‚òÖ</div>
        <h1 style="font-family: var(--font-main); font-size: 3.5rem; color: var(--secondary); margin-bottom: 20px;">‡§µ‡•à‡§¶‡§ø‡§ï ‡§ú‡•ç‡§Ø‡•ã‡§§‡§ø‡§∑ ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§®</h1>
        
        <div class="form-box" id="mainForm">
            <h3 style="color:var(--primary); font-family:var(--font-main); margin-bottom: 20px;">‡§®‡§ø‡§É‡§∂‡•Å‡§≤‡•ç‡§ï ‡§ï‡•Å‡§Ç‡§°‡§≤‡•Ä ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£</h3>
            <div class="input-grid">
                <input type="text" id="name" class="input-field" placeholder="‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ (Full Name)">
                <div style="position:relative;">
                    <input type="text" id="cityInput" class="input-field" placeholder="‡§ú‡§®‡•ç‡§Æ ‡§∏‡•ç‡§•‡§æ‡§®/‡§ó‡§æ‡§Å‡§µ (City/Village)" onkeyup="searchCity()">
                    <div class="city-results" id="cityList"></div>
                </div>
                <input type="date" id="dob" class="input-field">
                <input type="time" id="tob" class="input-field">
            </div>
            <button class="btn-generate" onclick="generateReport()">‡§ï‡•Å‡§Ç‡§°‡§≤‡•Ä ‡§¨‡§®‡§æ‡§è‡§Å (GENERATE)</button>
        </div>
    </section>

    <div class="dashboard" id="dashboardArea">
        <div class="user-header">
            <h2 id="userNameDisplay" style="color:var(--secondary); font-family:var(--font-main);">‡§®‡§Æ‡§∏‡•ç‡§§‡•á, ‡§ú‡§æ‡§§‡§ï</h2>
            <p id="rashiDisplay" style="color:var(--primary); font-size:1.2rem;">‡§∞‡§æ‡§∂‡§ø: --</p>
        </div>

        <div class="gemstone-box" id="gemSection">
            <div class="gem-item">
                <div class="gem-icon">üíé</div>
                <h4 style="color:var(--secondary);">‡§≠‡§æ‡§ó‡•ç‡§Ø ‡§∞‡§§‡•ç‡§® (Gemstone)</h4>
                <p id="gemName" style="color:#ccc;">--</p>
            </div>
            <div class="gem-item">
                <div class="gem-icon">üìø</div>
                <h4 style="color:var(--secondary);">‡§∞‡•Å‡§¶‡•ç‡§∞‡§æ‡§ï‡•ç‡§∑ (Rudraksha)</h4>
                <p id="rudrakshaName" style="color:#ccc;">--</p>
            </div>
            <div class="gem-item">
                <div class="gem-icon">üé®</div>
                <h4 style="color:var(--secondary);">‡§∂‡•Å‡§≠ ‡§∞‡§Ç‡§ó (Lucky Color)</h4>
                <p id="luckyColor" style="color:#ccc;">--</p>
            </div>
        </div>

        <div class="panchang-horoscope-grid">
            <div class="info-card" style="text-align:center;">
                <h3>‡§≤‡§ó‡•ç‡§® ‡§ï‡•Å‡§Ç‡§°‡§≤‡•Ä (D1 Chart)</h3>
                <div style="width:200px; height:200px; border:1px solid var(--primary); margin:0 auto; background:#000;">
                    <svg width="100%" height="100%" viewBox="0 0 100 100">
                        <rect x="0" y="0" width="100" height="100" fill="none" stroke="var(--primary)"/>
                        <line x1="0" y1="0" x2="100" y2="100" stroke="var(--primary)"/><line x1="100" y1="0" x2="0" y2="100" stroke="var(--primary)"/>
                        <line x1="50" y1="0" x2="0" y2="50" stroke="var(--primary)"/><line x1="50" y1="0" x2="100" y2="50" stroke="var(--primary)"/>
                        <line x1="0" y1="50" x2="50" y2="100" stroke="var(--primary)"/><line x1="100" y1="50" x2="50" y2="100" stroke="var(--primary)"/>
                    </svg>
                </div>
                <button class="pdf-btn" onclick="downloadFreePDF()"><i class="fas fa-file-pdf"></i> Download 3-Page Free Kundli</button>
            </div>
            <div class="info-card">
                <h3>‡§Ü‡§ú ‡§ï‡§æ ‡§™‡§Ç‡§ö‡§æ‡§Ç‡§ó (Live)</h3>
                <ul style="list-style:none; color:#ccc; line-height:2.2;">
                    <li>üìÖ <strong>‡§¶‡§ø‡§®‡§æ‡§Ç‡§ï:</strong> <span id="panchangDate">--</span></li>
                    <li>‚≠ê <strong>‡§®‡§ï‡•ç‡§∑‡§§‡•ç‡§∞:</strong> ‡§â‡§§‡•ç‡§§‡§∞‡§æ‡§∑‡§æ‡§¢‡§º‡§æ</li>
                    <li>üßò <strong>‡§Ø‡•ã‡§ó:</strong> ‡§∏‡§ø‡§¶‡•ç‡§ß‡§ø</li>
                    <li>üåô <strong>‡§™‡§ï‡•ç‡§∑:</strong> ‡§∂‡•Å‡§ï‡•ç‡§≤ ‡§™‡§ï‡•ç‡§∑</li>
                </ul>
            </div>
        </div>

        <h2 style="text-align:center; color:var(--secondary); font-family:var(--font-main); margin:40px 0;">/// ‡§µ‡§ø‡§∂‡§ø‡§∑‡•ç‡§ü ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç (Premium Services)</h2>
        <div class="modules-grid" id="modulesArea">
            <div class="module-card" onclick="openPayment('Vedic Kundli')"><div class="module-icon">‚ú®</div><div class="module-title">‡§µ‡•à‡§¶‡§ø‡§ï ‡§ï‡•Å‡§Ç‡§°‡§≤‡•Ä</div></div>
            <div class="module-card" onclick="openPayment('Kundli Milan')"><div class="module-icon">‚ù§Ô∏è</div><div class="module-title">‡§ï‡•Å‡§Ç‡§°‡§≤‡•Ä ‡§Æ‡§ø‡§≤‡§æ‡§®</div></div>
            <div class="module-card" onclick="openPayment('Tarot Card')"><div class="module-icon">üÉè</div><div class="module-title">‡§ü‡•à‡§∞‡•ã ‡§ï‡§æ‡§∞‡•ç‡§°</div></div>
            <div class="module-card" onclick="openPayment('Numerology')"><div class="module-icon">üî¢</div><div class="module-title">‡§Ö‡§Ç‡§ï ‡§ú‡•ç‡§Ø‡•ã‡§§‡§ø‡§∑</div></div>
            <div class="module-card" onclick="openPayment('Lal Kitab')"><div class="module-icon">üìï</div><div class="module-title">‡§≤‡§æ‡§≤ ‡§ï‡§ø‡§§‡§æ‡§¨</div></div>
            <div class="module-card" onclick="openPayment('Palmistry')"><div class="module-icon">‚úã</div><div class="module-title">‡§π‡§∏‡•ç‡§§‡§∞‡•á‡§ñ‡§æ</div></div>
        </div>
    </div>

    <div class="reg-section">
        <h2 style="color:var(--secondary); font-family:var(--font-main);">‡§ú‡•ç‡§Ø‡•ã‡§§‡§ø‡§∑ ‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£</h2>
        <form action="https://formspree.io/f/mwvnpzla" method="POST" class="reg-form">
            <input type="text" name="guru_name" class="input-field" placeholder="Full Name">
            <input type="email" name="email" class="input-field" placeholder="Email">
            <button class="btn-generate">REGISTER NOW</button>
        </form>
    </div>

    <footer>
        <p>&copy; 2026 Bhagya Aapka. Data Sources: Brihat Samhita & Hora Shatak.</p>
    </footer>

    <script>
        // 1. BG WAVE
        const container = document.getElementById('waveContainer');
        const symbols = ['‚ôà','‚ôâ','‚ôä','‚ôã','‚ôå','‚ôç','‚ôé','‚ôè','‚ôê','‚ôë','‚ôí','‚ôì','‡•ê','Âçê'];
        for(let i=0; i<30; i++) {
            let el = document.createElement('div');
            el.classList.add('float-symbol');
            el.innerText = symbols[Math.floor(Math.random()*symbols.length)];
            el.style.left = Math.random()*100 + 'vw';
            el.style.animationDuration = (10+Math.random()*20)+'s';
            el.style.animationDelay = Math.random()*5+'s';
            container.appendChild(el);
        }

        // 2. LIVE PANCHANG
        function updatePanchang() {
            const today = new Date();
            const dateStr = today.toLocaleDateString('hi-IN', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
            document.getElementById('liveMarquee').innerText = `|| ‡•ê ‡§®‡§Æ‡§É ‡§∂‡§ø‡§µ‡§æ‡§Ø || ‡§Ü‡§ú: ${dateStr} | ‡§§‡§ø‡§•‡§ø: ‡§∂‡•Å‡§ï‡•ç‡§≤ ‡§¶‡§∂‡§Æ‡•Ä | ‡§∞‡§æ‡§π‡•Å‡§ï‡§æ‡§≤: 15:00-16:30 ||`;
            document.getElementById('panchangDate').innerText = dateStr;
        }

          // 3. CITY SEARCH
        const locations = ["Mumbai", "Delhi", "Varanasi", "Patna", "Rampur", "Bhopal", "Indore", "Raipur", "Kashi", "Pune", "Jaipur", "Lucknow", "Kolkata", "Chennai", "Bangalore"];
        function searchCity() {
            let input = document.getElementById('cityInput').value.toLowerCase();
            let box = document.getElementById('cityList');
            box.innerHTML = '';
            if(input.length > 0) {
                box.style.display = 'block';
                let filtered = locations.filter(c => c.toLowerCase().includes(input));
                filtered.forEach(c => {
                    let div = document.createElement('div'); div.classList.add('city-item'); div.innerText = c;
                    div.onclick = function() { document.getElementById('cityInput').value = c; box.style.display = 'none'; }
                    box.appendChild(div);
                });
                if(filtered.length===0) {
                    let div = document.createElement('div'); div.classList.add('city-item'); div.innerText = "Use: "+input;
                    div.onclick = function() { box.style.display = 'none'; }; box.appendChild(div);
                }
            } else { box.style.display = 'none'; }
        }

        // 4. GENERATE REPORT & GEMSTONES
        function generateReport() {
            let name = document.getElementById('name').value;
            let dob = document.getElementById('dob').value;
            if(!name || !dob) { alert("Please fill Name and DOB."); return; }
            
            let date = new Date(dob);
            let month = date.getMonth() + 1;
            let colorMain = "", colorSec = "", rashi = "";
            let gem = "", rudra = "", luckyCol = "";

            if(month >= 3 && month <= 6) { 
                rashi = "‡§Æ‡•á‡§∑ (Aries)"; colorMain = "#FF4500"; colorSec = "#FFD700"; 
                gem = "‡§Æ‡•Ç‡§Å‡§ó‡§æ (Red Coral)"; rudra = "3 ‡§Æ‡•Å‡§ñ‡•Ä"; luckyCol = "‡§≤‡§æ‡§≤ (Red)";
            }
            else if(month >= 7 && month <= 10) { 
                rashi = "‡§ï‡§®‡•ç‡§Ø‡§æ (Virgo)"; colorMain = "#2E8B57"; colorSec = "#F4A460"; 
                gem = "‡§™‡§®‡•ç‡§®‡§æ (Emerald)"; rudra = "4 ‡§Æ‡•Å‡§ñ‡•Ä"; luckyCol = "‡§π‡§∞‡§æ (Green)";
            }
            else { 
                rashi = "‡§ï‡•Å‡§Ç‡§≠ (Aquarius)"; colorMain = "#00BFFF"; colorSec = "#E0FFFF"; 
                gem = "‡§®‡•Ä‡§≤‡§Æ (Blue Sapphire)"; rudra = "7 ‡§Æ‡•Å‡§ñ‡•Ä"; luckyCol = "‡§®‡•Ä‡§≤‡§æ (Blue)";
            }

            document.documentElement.style.setProperty('--primary', colorMain);
            document.documentElement.style.setProperty('--secondary', colorSec);

            document.getElementById('mainForm').style.display = 'none';
            document.getElementById('dashboardArea').style.display = 'block';
            document.getElementById('userNameDisplay').innerText = `‡§®‡§Æ‡§∏‡•ç‡§§‡•á, ${name}`;
            document.getElementById('rashiDisplay').innerText = `‡§∞‡§æ‡§∂‡§ø: ${rashi}`;
            
            // Set Gemstones
            document.getElementById('gemName').innerText = gem;
            document.getElementById('rudrakshaName').innerText = rudra;
            document.getElementById('luckyColor').innerText = luckyCol;

            document.getElementById('modulesArea').style.opacity = '1';
            document.getElementById('modulesArea').style.pointerEvents = 'all';
            document.getElementById('dashboardArea').scrollIntoView();
        }

        // 5. FREE PDF DOWNLOAD SIMULATION
        function downloadFreePDF() {
            document.getElementById('pdfLoader').style.display = 'flex';
            let width = 0;
            let elem = document.getElementById("progFill");
            let text = document.getElementById("loadingText");
            let id = setInterval(frame, 50);
            
            function frame() {
                if (width >= 100) {
                    clearInterval(id);
                    document.getElementById('pdfLoader').style.display = 'none';
                    alert("PDF Downloaded Successfully! (Check Downloads Folder)");
                } else {
                    width++; 
                    elem.style.width = width + '%'; 
                    if(width < 30) text.innerText = "Calculating Planetary Degrees...";
                    else if(width < 60) text.innerText = "Generating D1 & D9 Charts...";
                    else text.innerText = "Finalizing PDF Report...";
                }
            }
        }

        // 6. PAYMENT MODAL
        function openPayment(service) {
            document.getElementById('paymentModal').style.display = 'flex';
            document.getElementById('payServiceName').innerText = service;
        }

        // 7. CHAT LOGIC
        let chatTimer = 50; let chatInterval; let isChatOpen = false;
        function toggleChat() {
            const chatBox = document.getElementById('aiChatBox');
            if (!isChatOpen) {
                chatBox.style.display = 'flex'; isChatOpen = true;
                if(chatTimer === 50) startTimer();
            } else { chatBox.style.display = 'none'; isChatOpen = false; }
        }
        function startTimer() {
            chatInterval = setInterval(() => {
                chatTimer--; document.getElementById('chatTimer').innerText = chatTimer + 's';
                if (chatTimer <= 0) { clearInterval(chatInterval); alert("Free Session Ended. Contact Guru for more."); toggleChat(); }
            }, 1000);
        }
        function sendMessage() {
            let msg = document.getElementById('userMsg').value;
            if(msg) {
                let body = document.getElementById('chatBody');
                body.innerHTML += `<div style="background:#333; padding:5px; margin:5px 0; text-align:right; border-radius:5px;">${msg}</div>`;
                document.getElementById('userMsg').value = "";
                setTimeout(()=>{
                    body.innerHTML += `<div style="background:rgba(255,153,51,0.2); padding:5px; margin:5px 0; border:1px solid var(--primary); border-radius:5px;">‡§ó‡•ç‡§∞‡§π‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§ï‡§æ ‡§Ö‡§ß‡•ç‡§Ø‡§Ø‡§® ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•Ç‡§Å...</div>`;
                    body.scrollTop = body.scrollHeight;
                }, 1000);
            }
        }

        // 8. TRANSLATE
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({pageLanguage: 'en', includedLanguages: 'hi,mr,bn,gu,ta,te', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
        }
    </script>
    <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

</body>
</html>
